plugins {
    id 'java'
    id "com.gradleup.shadow" version "8.3.6"
}

subprojects {
    apply plugin: 'java'

    allprojects {
        repositories {
            maven { url = 'https://repo.papermc.io/repository/maven-public/' }
            maven { url = 'https://repo.papermc.io/repository/maven-snapshots/' }
            maven { url = 'https://jitpack.io' }
            mavenCentral()
        }
    }

    tasks.withType(JavaCompile).configureEach {
        options.encoding = 'UTF-8'
    }
}

tasks.register("shadowAll", com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar) {
    archiveClassifier.set("")
    from(project(":common").sourceSets.main.output)
    from(project(":v1_17").sourceSets.main.output)
    from(project(":v1_21").sourceSets.main.output)
}
